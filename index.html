
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="vqq11CWNVkLVnZvjCeZReKc8-FRmgxek2SOWjr35CbY" />
    <link rel="shortcut icon" type="image/png" href="android-chrome-512x512.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ESP32 NMEA Data Generator and Decoder | ESP32-NMEA-Generator-Decoder-Mqtt</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="ESP32 NMEA Data Generator and Decoder" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This project involves using an ESP32 microcontroller to generate and decode NMEA (National Marine Electronics Association) data. The ESP32 connects to a WiFi network and communicates with a public MQTT broker to publish and subscribe to specific topics. The project includes generating random NMEA sentences, decoding them." />
<meta property="og:description" content="This project involves using an ESP32 microcontroller to generate and decode NMEA (National Marine Electronics Association) data. The ESP32 connects to a WiFi network and communicates with a public MQTT broker to publish and subscribe to specific topics. The project includes generating random NMEA sentences, decoding them." />
<link rel="canonical" href="https://esmail-sarhadi.github.io/ESP32-NMEA-Generator-Decoder-Mqtt/" />
<meta property="og:url" content="https://esmail-sarhadi.github.io/ESP32-NMEA-Generator-Decoder-Mqtt/" />
<meta property="og:site_name" content="ESP32-NMEA-Generator-Decoder-Mqtt" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ESP32 NMEA Data Generator and Decoder" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"This project involves using an ESP32 microcontroller to generate and decode NMEA (National Marine Electronics Association) data. The ESP32 connects to a WiFi network and communicates with a public MQTT broker to publish and subscribe to specific topics. The project includes generating random NMEA sentences, decoding them.","headline":"ESP32 NMEA Data Generator and Decoder","name":"ESP32-NMEA-Generator-Decoder-Mqtt","url":"https://esmail-sarhadi.github.io/ESP32-NMEA-Generator-Decoder-Mqtt/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/ESP32-NMEA-Generator-Decoder-Mqtt/assets/css/style.css?v=f3f2771d44d8718e37c209885bcd3f194b022654">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/ESP32-NMEA-Generator-Decoder-Mqtt/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://esmail-sarhadi.github.io/ESP32-NMEA-Generator-Decoder-Mqtt/">ESP32-NMEA-Generator-Decoder-Mqtt</a></h1>
      

      <h1 id="esp32-nmea-data-generator-and-decoder">ESP32 NMEA Data Generator and Decoder</h1>

<p>This project demonstrates how to use an ESP32 microcontroller to generate and decode NMEA (National Marine Electronics Association) data. The ESP32 connects to a WiFi network and communicates with a public MQTT broker to publish and subscribe to specific topics. The project includes generating random NMEA sentences, decoding them, and displaying the results via a web interface using Flask and MQTT.</p>

<h2 id="features">Features</h2>
<ul>
  <li>Connects ESP32 to a WiFi network.</li>
  <li>Uses MQTT to communicate with a public broker.</li>
  <li>Generates random NMEA sentences.</li>
  <li>Decodes NMEA sentences.</li>
  <li>Displays the generated and decoded data on a web interface.</li>
</ul>

<h2 id="components">Components</h2>
<ul>
  <li>ESP32 microcontroller.</li>
  <li>WiFi network.</li>
  <li>MQTT broker (e.g., broker.emqx.io).</li>
  <li>Flask web server.</li>
</ul>

<h2 id="getting-started">Getting Started</h2>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
  <li>ESP32 development board.</li>
  <li>Arduino IDE.</li>
  <li>Python 3.x.</li>
  <li>Flask.</li>
  <li>paho-mqtt.</li>
</ul>

<h3 id="installation">Installation</h3>

<ol>
  <li><strong>ESP32 Setup:</strong>
    <ul>
      <li>Install the <a href="https://github.com/espressif/arduino-esp32">ESP32 board</a> in Arduino IDE.</li>
      <li>Install the necessary libraries in Arduino IDE:
        <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;WiFi.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;PubSubClient.h&gt;</span><span class="cp">
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Flask and MQTT Setup:</strong>
    <ul>
      <li>Install Flask and paho-mqtt:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>flask paho-mqtt
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="usage">Usage</h3>

<ol>
  <li><strong>ESP32 Code:</strong>
    <ul>
      <li>Upload the provided ESP32 code to your ESP32 development board.</li>
      <li>Example snippet from <code class="language-plaintext highlighter-rouge">main.cpp</code>:
        <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
    <span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ssid</span><span class="p">,</span> <span class="n">password</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Connecting to WiFi.."</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Connected to the Wi-Fi network"</span><span class="p">);</span>

    <span class="n">client</span><span class="p">.</span><span class="n">setServer</span><span class="p">(</span><span class="n">mqtt_broker</span><span class="p">,</span> <span class="n">mqtt_port</span><span class="p">);</span>
    <span class="n">client</span><span class="p">.</span><span class="n">setCallback</span><span class="p">(</span><span class="n">callback</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">client</span><span class="p">.</span><span class="n">connected</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">String</span> <span class="n">client_id</span> <span class="o">=</span> <span class="s">"esp32-client-"</span><span class="p">;</span>
        <span class="n">client_id</span> <span class="o">+=</span> <span class="n">String</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">macAddress</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">client_id</span><span class="p">.</span><span class="n">c_str</span><span class="p">()))</span> <span class="p">{</span>
            <span class="n">client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">topic_generate</span><span class="p">);</span>
            <span class="n">client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">topic_decode</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">client</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="s">"Hi, I'm ESP32 ^^"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Flask Server:</strong>
    <ul>
      <li>Run the Flask server:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python app.py
</code></pre></div>        </div>
      </li>
      <li>Example snippet from <code class="language-plaintext highlighter-rouge">app.py</code>:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/generate'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">generate_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">last_response</span>
    <span class="n">last_response</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">if</span> <span class="n">mqtt_client_obj</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">mqtt_client_obj</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">topic_generate</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Message published successfully"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Failed to publish message"</span><span class="p">)</span>

        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Ensure sufficient wait time for ESP32 response
</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">"data"</span><span class="p">:</span> <span class="n">last_response</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">"error"</span><span class="p">:</span> <span class="s">"MQTT client not connected"</span><span class="p">})</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Web Interface:</strong>
    <ul>
      <li>Access the web interface by navigating to <code class="language-plaintext highlighter-rouge">http://&lt;your_server_ip&gt;:5000</code> in your web browser.</li>
      <li>Example snippet from <code class="language-plaintext highlighter-rouge">index.html</code>:
        <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>ESP32 NMEA Data<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;style&gt;</span>
        <span class="nt">body</span> <span class="p">{</span> <span class="nl">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span> <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span> <span class="p">}</span>
        <span class="nc">.button</span> <span class="p">{</span> <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span> <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span> <span class="m">20px</span><span class="p">;</span> <span class="nl">font-size</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span> <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span> <span class="p">}</span>
        <span class="nc">.button</span><span class="nd">:hover</span> <span class="p">{</span> <span class="nl">background-color</span><span class="p">:</span> <span class="m">#ddd</span><span class="p">;</span> <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>ESP32 NMEA Data<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"button"</span> <span class="na">onclick=</span><span class="s">"generateData()"</span><span class="nt">&gt;</span>Generate Sample Data<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;pre</span> <span class="na">id=</span><span class="s">"output"</span><span class="nt">&gt;&lt;/pre&gt;</span>
    <span class="nt">&lt;script&gt;</span>
        <span class="kd">function</span> <span class="nx">generateData</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/generate</span><span class="dl">'</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
                <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">output</span><span class="dl">'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
                <span class="p">});</span>
        <span class="p">}</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h3 id="files">Files</h3>

<ul>
  <li><strong>ESP32 Code:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">main.cpp</code>: Contains the code for the ESP32 to connect to WiFi, generate, and decode NMEA data.</li>
    </ul>
  </li>
  <li><strong>Flask Server:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">app.py</code>: Contains the Flask server code to handle requests and interact with the MQTT broker.</li>
    </ul>
  </li>
  <li><strong>Web Interface:</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">index.html</code>: Simple HTML file for the web interface.</li>
    </ul>
  </li>
</ul>

<h3 id="example">Example</h3>

<p>After setting up, you can generate random NMEA sentences and see the decoded information on the web interface.</p>

<h2 id="contributing">Contributing</h2>

<p>If you would like to contribute to this project, please open an issue or submit a pull request.</p>
<h2 id="profile">Profile</h2>

<p>Check out my GitHub profile: <a href="https://github.com/Esmail-sarhadi" target="_blank">Esmail Sarhadi</a></p>

<h2 id="project-link">Project Link</h2>

<p>View this project on GitHub: <a href="https://github.com/Esmail-sarhadi/ESP32-NMEA-Generator-Decoder-Mqtt" target="_blank">ESP32-NMEA-Generator-Decoder-Mqtt</a></p>

<h2 id="donation">Donation</h2>

<p>If you find this project helpful, consider making a donation:</p>
<p><a href="https://nowpayments.io/donation?api_key=REWCYVC-A1AMFK3-QNRS663-PKJSBD2&source=lk_donation&medium=referral" target="_blank">
     <img src="https://nowpayments.io/images/embeds/donation-button-black.svg" alt="Crypto donation button by NOWPayments">
</a></p>
<h2 id="license">License</h2>

<p>This project is licensed under the MIT License - see the <a href="/ESP32-NMEA-Generator-Decoder-Mqtt/LICENSE">LICENSE</a> file for details.</p>

<h2 id="acknowledgments">Acknowledgments</h2>

<ul>
  <li>This project uses the ESP32 microcontroller, Arduino IDE, Flask, and paho-mqtt.</li>
</ul>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/Esmail-sarhadi/ESP32-NMEA-Generator-Decoder-Mqtt/edit/main/README.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
